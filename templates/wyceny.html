{% extends 'base.html' %}

{% block title %}Wyceny - LassSup Web{% endblock %}

{% block content %}
  <!-- Ukryty input pliku -->
  <input type="file" id="fileInput" name="file" accept=".html, .pdf">

  <!-- Sidebar – panel z lewej -->
  <div id="sidebar">
    <div class="sidebar-content">
      <form id="pricingForm">
        <div class="form-group">
          <label for="cuttingCostBlack">Koszt cięcia stali czarnej</label>
          <input type="number" class="form-control" id="cuttingCostBlack" value="">
        </div>
        <div class="form-group">
          <label for="cuttingCostStainless">Koszt cięcia stali nierdzewnej</label>
          <input type="number" class="form-control" id="cuttingCostStainless" value="">
        </div>
        <div class="form-group">
          <label for="cuttingCostAluminium">Koszt cięcia aluminium</label>
          <input type="number" class="form-control" id="cuttingCostAluminium" value="">
        </div>
        <div class="form-group">
          <label for="materialCostBlack">Koszt materiału (stal czarna)</label>
          <input type="number" class="form-control" id="materialCostBlack" value="">
        </div>
        <div class="form-group">
          <label for="materialCostStainless">Koszt materiału (stal nierdzewna)</label>
          <input type="number" class="form-control" id="materialCostStainless" value="">
        </div>
        <div class="form-group">
          <label for="materialCostAluminium">Koszt materiału (aluminium)</label>
          <input type="number" class="form-control" id="materialCostAluminium" value="">
        </div>
        <div class="form-group">
          <label for="bendingCostSum">Suma kosztów gięcia</label>
          <input type="number" class="form-control" id="bendingCostSum" value="">
        </div>
      </form>
    </div>
    <button id="sidebarToggle" class="btn btn-primary sidebar-toggle-btn">〉</button>
  </div>

  <!-- Główna zawartość -->
  <div class="container-fluid main-container">
    <div class="row header-spacing mb-3">
      <!-- Karta "Dane programów:" -->
      <div class="col-md-6">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span class="header-text">Dane programów:</span>
            <button id="plusButton" class="btn btn-success plus-btn">
              <span style="font-size:1.5em;">&#43;</span>
            </button>
          </div>
          <div class="card-body fixed-height">
            <div class="table-responsive fixed-window">
              <table id="programsTable" class="table table-bordered sticky-table">
                <colgroup>
                  <col style="width:5%;">
                  <col style="width:25%;">
                  <col style="width:20%;">
                  <col style="width:15%;">
                  <col style="width:20%;">
                  <col style="width:15%;">
                </colgroup>
                <thead>
                  <tr>
                    <th></th>
                    <th>Nazwa programu</th>
                    <th>Materiał</th>
                    <th>Grubość</th>
                    <th>Czas programu</th>
                    <th>Ilość powtórzeń</th>
                  </tr>
                </thead>
                <tbody id="programsTableBody">
                  <!-- Dynamic rows -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Karta "Wyceny:" -->
      <div class="col-md-6">
        <div class="card" style="margin-left: -20px; margin-right: 20px;">
          <div class="card-header">Wyceny:</div>
          <div class="card-body fixed-height">
            <div id="pricingSummary">
              <p>Ilość detali: 0</p>
              <p>Łączny koszt cięcia: 0.00</p>
              <p>Łączny koszt materiału:</p>
              <ul id="materialCostBreakdown">
                <li>Stal czarna: 0.00</li>
                <li>Stal nierdzewna: 0.00</li>
                <li>Aluminium: 0.00</li>
                <li>Inne: 0.00</li>
              </ul>
              <p>Całkowita cena: 0.00</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabela "Detale:" -->
    <div class="row flex-grow-1">
      <div class="col">
        <div class="card h-100">
          <div class="card-header">Detale:</div>
          <div class="card-body fixed-height">
            <div class="table-responsive fixed-window">
              <table id="detailsTable" class="table table-bordered sticky-table">
                <colgroup>
                  <col style="width:2%;">
                  <col style="width:10%;">
                  <col style="width:15%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                  <col style="width:10%;">
                </colgroup>
                <thead>
                  <tr>
                    <th><input type="checkbox" id="selectAllCheckbox" class="detailCheckbox" checked /></th>
                    <th>Rysunek</th>
                    <th>Nazwa detalu</th>
                    <th>Materiał</th>
                    <th>Grubość</th>
                    <th>Wymiar X</th>
                    <th>Wymiar Y</th>
                    <th>Waga</th>
                    <th>Ilość gięć</th>
                    <th>Czas cięcia</th>
                    <th>Ilość</th>
                    <th>Koszt cięcia</th>
                    <th>Koszt materiału</th>
                    <th>Koszt detalu</th>
                    <th>Całkowity koszt</th>
                  </tr>
                </thead>
                <tbody id="detailsTableBody">
                  <!-- Dynamic rows -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="loading" class="row">
    <div class="col">
      <div class="spinner-border" role="status">
        <span class="sr-only">Ładowanie...</span>
      </div>
      <span>Przetwarzanie pliku, proszę czekać...</span>
    </div>
  </div>
{% endblock %}
